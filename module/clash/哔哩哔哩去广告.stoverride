name: |-
  å“”å“©å“”å“©å»å¹¿å‘Š
desc: |-
  è¿‡æ»¤å“”å“©å“”å“©å¹¿å‘Šã€ç§»é™¤é’å°‘å¹´æ¨¡å¼å¼¹çª—å’Œäº¤äº’å¼å¼¹å¹•ã€ç§»é™¤æ— ç”¨åŠŸèƒ½å’Œé“¾æ¥è·Ÿè¸ªå‚æ•°ã€‚æ­¤æ’ä»¶ä»…å»ºè®®iOS 15ä»¥ä¸Šè®¾å¤‡ä½¿ç”¨ï¼Œä¸”å¿…é¡»å¯ç”¨MitM-over-HTTP/2åŠŸèƒ½ã€‚
author: |-
  Maasea[https://github.com/Maasea], RuCu6[https://github.com/RuCu6], å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
icon: |-
  https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Bilibili.png
category: |-
  iKeLee
openUrl: |-
  https://apps.apple.com/app/id736536022
tag: |-
  å»å¹¿å‘Š
system_version: |-
  15
loon_version: |-
  3.2.1(749)
homepage: |-
  https://github.com/luestr/ProxyResource/blob/main/README.md
date: |-
  2024-10-19 17:18:31

http:

  force-http-engine:
    - ":8000"

  mitm:
    - "app.bilibili.com"
    - "api.bilibili.com"
    - "api.live.bilibili.com"
    - "grpc.biliapi.net"
    - "www.bilibili.com"
    - "m.bilibili.com"
    - "live.bilibili.com"

  url-rewrite:
# å¼€å±å¹¿å‘Š
    - >-
      ^http:\/\/upos-sz-static\.bilivideo\.com\/ssaxcode\/\w{2}\/\w{2}\/\w{32}-1-SPLASH - reject-img
    - >-
      ^http:\/\/[\d\.]+:8000\/v1\/resource\/\w{32}-1-SPLASH - reject-img
# ç§»é™¤è§†é¢‘é“¾æ¥è·Ÿè¸ªå‚æ•°
    - >-
      (^https:\/\/(?:www|m)\.bilibili\.com\/video\/(?:BV\w{10}|av\d{9}))(\/?\?.*) $1 302
# ç§»é™¤ç›´æ’­é—´é“¾æ¥è·Ÿè¸ªå‚æ•°
    - >-
      (^https:\/\/live\.bilibili\.com\/\d+)(\/?\?.*) $1 302
# å¼€å±å¹¿å‘Š
    - >-
      ^https:\/\/(?:api\.bilibili\.com\/x\/mengqi\/v1\/resource|app\.bilibili\.com\/x\/resource\/peak\/download) - reject-dict
# æ»¡æ„åº¦è°ƒç ”
    - >-
      ^https:\/\/api\.bilibili\.com\/x\/v2\/dm\/qoe\/show\? - reject-dict
# å¤§ä¼šå‘˜å¹¿å‘Š
    - >-
      ^https:\/\/api\.bilibili\.com\/x\/vip\/ads\/materials\? - reject-dict
# ç›´æ’­å¹¿å‘Š
    - >-
      ^https:\/\/api\.live\.bilibili\.com\/xlive\/e-commerce-interface\/v1\/ecommerce-user\/get_shopping_info\? - reject-dict
# ç§»é™¤æœç´¢ä¸­çš„é»˜è®¤å…³é”®è¯
    - >-
      ^https:\/\/(?:app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.interface\.v1\.Search\/DefaultWords - reject-dict
# æµé‡å¡æ¨è
    - >-
      ^https:\/\/(?:app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.view\.v1\.View\/TFInfo - reject-dict
# IPè¯·æ±‚ã€åœ°ç†ä½ç½®è¯·æ±‚ //api.bilibili.com
    - >-
      ^https:\/\/app\.bilibili\.com\/x\/resource\/ip - reject-dict
    - >-
      ^https:\/\/api\.bilibili\.com\/x\/web-interface\/zone\?jsonp - reject-dict

  script:
# ç§»é™¤å³ä¸Šè§’æ´»åŠ¨å…¥å£
    - match: ^https:\/\/app\.bilibili\.com\/x\/resource\/top\/activity\?
      name: "echoResponse_39"
      type: request
      timeout: 60
      argument: |-
        text=%7B%20%22code%22%3A%20-404%2C%20%22message%22%3A%20%22%E5%95%A5%E9%83%BD%E6%9C%A8%E6%9C%89%22%2C%20%22ttl%22%3A%201%2C%20%22data%22%3A%20null%20%7D&status-code=200

    - match: ^https:\/\/app\.bilibili\.com\/x\/resource\/show\/skin\?
      name: "body_rewrite_38_41"
      type: response
      require-body: true
      max-size: -1
      timeout: 30
      argument: |-
        %5B%5B%22json-del%22%2C%5B%22data.common_equip%22%5D%5D%5D

# ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š
    - match: ^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.app\.(view|viewunite)\.v1\.View\/(View|ViewProgress)$
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43"
      type: response
      require-body: true
      binary-mode: true

# ç§»é™¤æœç´¢ç»“æœå¹¿å‘Š - å¾…å®Œå–„
    - match: ^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.polymer\.app\.search\.v1\.Search\/SearchAll$
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43"
      type: response
      require-body: true
      binary-mode: true

# ç§»é™¤è¯„è®ºåŒºå¹¿å‘Š
    - match: ^https:\/\/grpc\.biliapi\.net\/bilibili\.main\.community\.reply\.v1\.Reply\/MainList
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43"
      type: response
      require-body: true
      binary-mode: true

# ç§»é™¤åŠ¨æ€é¡µé¢å¹¿å‘Š - å¾…å®Œå–„
    - match: ^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.app\.dynamic\.v2\.Dynamic\/DynAll$
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43"
      type: response
      require-body: true
      binary-mode: true

# ä¼šå‘˜ç‰¹æ•ˆå¼¹å¹•å¤„ç†
    - match: ^https:\/\/grpc\.biliapi\.net\/bilibili\.community\.service\.dm\.v1\.DM\/DmSegMobile
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43"
      type: response
      require-body: true
      binary-mode: true

# ç§»é™¤äº¤äº’å¼å¼¹å¹•
    - match: ^https:\/\/grpc\.biliapi\.net\/bilibili\.community\.service\.dm\.v1\.DM\/DmView
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43"
      type: response
      require-body: true
      binary-mode: true

# ç§»é™¤é’å°‘å¹´æ¨¡å¼å¼¹çª—
    - match: ^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.interface\.v1\.Teenagers\/ModeStatus
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43"
      type: response
      require-body: true
      binary-mode: true

# ç§»é™¤å¼€å±å¹¿å‘Š
    - match: ^https:\/\/app\.bilibili\.com\/x\/v2\/splash\/(brand\/list|event\/list2|list|show)\?
      name: "ç§»é™¤å¼€å±å¹¿å‘Š_57"
      type: response
      require-body: true

# ç§»é™¤é¦–é¡µæ¨èå¹¿å‘Š
    - match: ^https:\/\/app\.bilibili\.com\/x\/v2\/feed\/index(\/story)?\?
      name: "ç§»é™¤å¼€å±å¹¿å‘Š_57"
      type: response
      require-body: true

# ç²¾ç®€é¦–é¡µé¡¶éƒ¨æ ‡ç­¾
    - match: ^https:\/\/app\.bilibili\.com\/x\/resource\/show\/tab\/v2\?
      name: "ç§»é™¤å¼€å±å¹¿å‘Š_57"
      type: response
      require-body: true

# ç§»é™¤çƒ­æœå¹¿å‘Š
    - match: ^https:\/\/app\.bilibili\.com\/x\/v2\/search\/square\?
      name: "ç§»é™¤å¼€å±å¹¿å‘Š_57"
      type: response
      require-body: true

# ç§»é™¤è§‚å½±é¡µå¹¿å‘Š
    - match: ^https:\/\/api\.bilibili\.com\/pgc\/page\/(bangumi|cinema\/tab\?)
      name: "ç§»é™¤å¼€å±å¹¿å‘Š_57"
      type: response
      require-body: true

# ç§»é™¤ç›´æ’­é—´å¹¿å‘Š
    - match: ^https:\/\/api\.live\.bilibili\.com\/xlive\/app-room\/v1\/index\/getInfoByRoom\?
      name: "ç§»é™¤å¼€å±å¹¿å‘Š_57"
      type: response
      require-body: true

# ç²¾ç®€æˆ‘çš„é¡µé¢
    - match: ^https:\/\/app\.bilibili\.com\/x\/v2\/account\/(mine\?|mine\/ipad\?)
      name: "ç§»é™¤å¼€å±å¹¿å‘Š_57"
      type: response
      require-body: true

script-providers:
  "echoResponse_39":
    url: https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/scripts/echo-response.js
    interval: 86400
  "body_rewrite_38_41":
    url: https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/scripts/body-rewrite.js
    interval: 86400
  "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘åˆ—è¡¨å¹¿å‘Š_43":
    url: https://kelee.one/Resource/Script/Bilibili/Bilibili_helper_beta.js
    interval: 86400
  "ç§»é™¤å¼€å±å¹¿å‘Š_57":
    url: https://kelee.one/Resource/Script/Bilibili/Bilibili_remove_ads.js
    interval: 86400
